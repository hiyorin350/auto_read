{"ast":null,"code":"import React,{useState}from'react';import{ChakraProvider,Button,Heading,Box,Input,FormControl,FormLabel,Image,VStack,HStack}from\"@chakra-ui/react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[uploadedFile,setUploadedFile]=useState(null);return/*#__PURE__*/_jsx(ChakraProvider,{children:/*#__PURE__*/_jsxs(Box,{m:5,children:[/*#__PURE__*/_jsx(Heading,{mb:4,children:\"autoread\"}),/*#__PURE__*/_jsxs(VStack,{spacing:5,align:\"stretch\",children:[/*#__PURE__*/_jsx(FileUpload,{setUploadedFile:setUploadedFile}),/*#__PURE__*/_jsx(ContentDisplay,{uploadedFile:uploadedFile})]})]})});}function FileUpload(_ref){let{setUploadedFile}=_ref;const[file,setFile]=useState(null);const handleFileChange=e=>{setFile(e.target.files[0]);setUploadedFile(URL.createObjectURL(e.target.files[0]));};const handleSubmit=async e=>{e.preventDefault();if(!file){alert('ファイルを選択してください。');return;}const formData=new FormData();formData.append('file',file);try{const response=await fetch('http://localhost:3000/upload',{method:'POST',body:formData//アップロード画像\n});if(!response.ok){throw new Error('サーバーエラー');}// レスポンスがOKの場合、ページを再読み込み\nwindow.location.reload();}catch(error){console.error('アップロードエラー:',error);alert('ファイルアップロード失敗。');}};const handleAutoRead=()=>{if(!file){alert('ファイルを選択してください。');return;}// 自動読み取り処理をここに追加\nalert('自動読み取りが実行されました。');};return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(Input,{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsxs(HStack,{spacing:4,mt:4,children:[/*#__PURE__*/_jsx(Button,{colorScheme:\"teal\",type:\"submit\",children:\"\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(Button,{colorScheme:\"orange\",onClick:handleAutoRead,children:\"\\u81EA\\u52D5\\u8AAD\\u307F\\u53D6\\u308A\"})]})]})});}function ContentDisplay(_ref2){let{uploadedFile}=_ref2;return/*#__PURE__*/_jsxs(HStack,{align:\"start\",spacing:10,children:[/*#__PURE__*/_jsx(ImageDisplay,{uploadedFile:uploadedFile}),/*#__PURE__*/_jsx(MeterForm,{})]});}function ImageDisplay(_ref3){let{uploadedFile}=_ref3;if(!uploadedFile){return null;}return/*#__PURE__*/_jsx(Image,{src:uploadedFile,alt:\"\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u3055\\u308C\\u305F\\u753B\\u50CF\",boxSize:\"300px\",objectFit:\"cover\"});}function MeterForm(){const[meterName,setMeterName]=useState('');const[maxValue,setMaxValue]=useState('');const[minValue,setMinValue]=useState('');const[unit,setUnit]=useState('');const[value,setValue]=useState('');const handleDownload=()=>{const data={meterName,maxValue,minValue,unit,value};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='meterData.json';document.body.appendChild(a);a.click();document.body.removeChild(a);};return/*#__PURE__*/_jsxs(Box,{p:5,shadow:\"md\",borderWidth:\"1px\",children:[/*#__PURE__*/_jsxs(FormControl,{mb:4,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u30E1\\u30FC\\u30BF\\u30FC\\u306E\\u540D\\u524D\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:meterName,onChange:e=>setMeterName(e.target.value)})]}),/*#__PURE__*/_jsxs(FormControl,{mb:4,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u6700\\u5927\\u5024\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:maxValue,onChange:e=>setMaxValue(e.target.value)})]}),/*#__PURE__*/_jsxs(FormControl,{mb:4,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u6700\\u5C0F\\u5024\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:minValue,onChange:e=>setMinValue(e.target.value)})]}),/*#__PURE__*/_jsxs(FormControl,{mb:4,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u5358\\u4F4D\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:unit,onChange:e=>setUnit(e.target.value)})]}),/*#__PURE__*/_jsxs(FormControl,{mb:4,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u5024\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:value,onChange:e=>setValue(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",onClick:handleDownload,children:\"JSON\\u30C0\\u30A6\\u30F3\\u30ED\\u30FC\\u30C9\"})]});}export default App;","map":{"version":3,"names":["React","useState","ChakraProvider","Button","Heading","Box","Input","FormControl","FormLabel","Image","VStack","HStack","jsx","_jsx","jsxs","_jsxs","App","uploadedFile","setUploadedFile","children","m","mb","spacing","align","FileUpload","ContentDisplay","_ref","file","setFile","handleFileChange","e","target","files","URL","createObjectURL","handleSubmit","preventDefault","alert","formData","FormData","append","response","fetch","method","body","ok","Error","window","location","reload","error","console","handleAutoRead","onSubmit","type","onChange","mt","colorScheme","onClick","_ref2","ImageDisplay","MeterForm","_ref3","src","alt","boxSize","objectFit","meterName","setMeterName","maxValue","setMaxValue","minValue","setMinValue","unit","setUnit","value","setValue","handleDownload","data","blob","Blob","JSON","stringify","url","a","document","createElement","href","download","appendChild","click","removeChild","p","shadow","borderWidth"],"sources":["/Users/hiyori/autoread_dev/src/FileUpload.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ChakraProvider, Button, Heading, Box, Input, FormControl, FormLabel, Image, VStack, HStack } from \"@chakra-ui/react\";\n\nfunction App() {\n  const [uploadedFile, setUploadedFile] = useState(null);\n\n  return (\n    <ChakraProvider>\n      <Box m={5}>\n        <Heading mb={4}>autoread</Heading>\n        <VStack spacing={5} align=\"stretch\">\n          <FileUpload setUploadedFile={setUploadedFile} />\n          <ContentDisplay uploadedFile={uploadedFile} />\n        </VStack>\n      </Box>\n    </ChakraProvider>\n  );\n}\n\nfunction FileUpload({ setUploadedFile }) {\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n    setUploadedFile(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!file) {\n      alert('ファイルを選択してください。');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await fetch('http://localhost:3000/upload', {\n        method: 'POST',\n        body: formData //アップロード画像\n      });\n\n      if (!response.ok) {\n        throw new Error('サーバーエラー');\n      }\n      // レスポンスがOKの場合、ページを再読み込み\n      window.location.reload();\n    } catch (error) {\n      console.error('アップロードエラー:', error);\n      alert('ファイルアップロード失敗。');\n    }\n  };\n\n  const handleAutoRead = () => {\n    if (!file) {\n      alert('ファイルを選択してください。');\n      return;\n    }\n\n    // 自動読み取り処理をここに追加\n    alert('自動読み取りが実行されました。');\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <FormControl>\n        <Input type=\"file\" onChange={handleFileChange} />\n        <HStack spacing={4} mt={4}>\n          <Button colorScheme=\"teal\" type=\"submit\">アップロード</Button>\n          <Button colorScheme=\"orange\" onClick={handleAutoRead}>自動読み取り</Button>\n        </HStack>\n      </FormControl>\n    </form>\n  );\n}\n\nfunction ContentDisplay({ uploadedFile }) {\n  return (\n    <HStack align=\"start\" spacing={10}>\n      <ImageDisplay uploadedFile={uploadedFile} />\n      <MeterForm />\n    </HStack>\n  );\n}\n\nfunction ImageDisplay({ uploadedFile }) {\n  if (!uploadedFile) {\n    return null;\n  }\n  return <Image src={uploadedFile} alt=\"アップロードされた画像\" boxSize=\"300px\" objectFit=\"cover\" />;\n}\n\nfunction MeterForm() {\n  const [meterName, setMeterName] = useState('');\n  const [maxValue, setMaxValue] = useState('');\n  const [minValue, setMinValue] = useState('');\n  const [unit, setUnit] = useState('');\n  const [value, setValue] = useState('');\n\n  const handleDownload = () => {\n    const data = {\n      meterName,\n      maxValue,\n      minValue,\n      unit,\n      value,\n    };\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'meterData.json';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  };\n\n  return (\n    <Box p={5} shadow=\"md\" borderWidth=\"1px\">\n      <FormControl mb={4}>\n        <FormLabel>メーターの名前</FormLabel>\n        <Input type=\"text\" value={meterName} onChange={(e) => setMeterName(e.target.value)} />\n      </FormControl>\n      <FormControl mb={4}>\n        <FormLabel>最大値</FormLabel>\n        <Input type=\"text\" value={maxValue} onChange={(e) => setMaxValue(e.target.value)} />\n      </FormControl>\n      <FormControl mb={4}>\n        <FormLabel>最小値</FormLabel>\n        <Input type=\"text\" value={minValue} onChange={(e) => setMinValue(e.target.value)} />\n      </FormControl>\n      <FormControl mb={4}>\n        <FormLabel>単位</FormLabel>\n        <Input type=\"text\" value={unit} onChange={(e) => setUnit(e.target.value)} />\n      </FormControl>\n      <FormControl mb={4}>\n        <FormLabel>値</FormLabel>\n        <Input type=\"text\" value={value} onChange={(e) => setValue(e.target.value)} />\n      </FormControl>\n      <Button colorScheme=\"blue\" onClick={handleDownload}>\n        JSONダウンロード\n      </Button>\n    </Box>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}